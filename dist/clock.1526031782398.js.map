{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./common/render.ts","webpack:///./common/canvas.ts","webpack:///./common/CONSTANT.ts","webpack:///./example/clock/canvas/index.ts","webpack:///./example/clock/index.ts","webpack:///./common/util.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","render","[object Object]","moduleName","this","el","document","createElement","isSignleModule","util","classList","add","appendChild","canvas","body","renderToHtml","aloneRender","collectRender","contextId","contextAttributes","getContext","width","height","WIDTH","HEIGHT","FONT","clock_canvas","super","ctx","initVariable","initCanvasSize","setCtxAttribute","translate","radius","Math","min","centerRadius","marginBound","font","secondPointerLength","minutePointerLength","hourPointerLength","fillStyle","strokeStyle","lineWidth","beginPath","arc","PI","stroke","angle","scales","save","textAlign","textBaseline","length","fillText","cos","sin","restore","closePath","fill","hour","drawPointer","minute","second","rotate","moveTo","lineTo","radian","x","y","clearRect","date","Date","getHours","getMinutes","getSeconds","drawDisc","drawCenterArc","drawScale","drawHourPointer","drawMinutePointer","drawSecondPointer","window","requestAnimationFrame","bind","clock_moduleName","clock_Clock","getQuery","search","location","query","create","reg","matchs","exec"],"mappings":"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","file":"clock.1526031782398.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"sl1b\");\n","/* render class */\n\nimport Canvas from './canvas';\nimport { isSignleModule } from './util';\n\nabstract class CommonRender {\n  public isSignleModule: boolean;\n  public el: HTMLDivElement;\n  public moduleName: string;\n  public abstract canvas: Canvas;\n  constructor(moduleName: string) {\n    this.moduleName = moduleName;\n    this.el = document.createElement('div');\n    this.isSignleModule = isSignleModule(moduleName);\n  }\n  private renderToHtml() {\n    if (this.isSignleModule) {\n      this.el.classList.add('signle');\n    }\n    this.el.classList.add(this.moduleName);\n    this.el.appendChild(this.canvas.el);\n    document.body.appendChild(this.el);\n    this.canvas.render();\n  }\n  public aloneRender() {}\n  public collectRender() {}\n  public render() {\n    this.renderToHtml();\n    return isSignleModule ? this.aloneRender() : this.collectRender();\n  }\n}\n\nexport default CommonRender;\n","abstract class Canvas {\n  readonly el: HTMLCanvasElement;\n  public abstract width: number;\n  public abstract height: number;\n  constructor() {\n    this.el = document.createElement('canvas');\n  }\n  public getContext(contextId: '2d', contextAttributes?: Canvas2DContextAttributes) {\n    return this.el.getContext(contextId, contextAttributes);\n  }\n  public initCanvasSize() {\n    this.el.width = this.width;\n    this.el.height = this.height;\n  }\n  public abstract render(): void;\n}\n\nexport default Canvas;\n","/* 默认宽度 */\nexport const WIDTH = 500;\n/* 默认高度 */\nexport const HEIGHT = 500;\n/* 默认字体大小 */\nexport const FONT = `${24}px sans-serif`;\n","import Canvas from 'common/canvas';\nimport { WIDTH, HEIGHT, FONT } from 'common/CONSTANT';\n\nclass ClockCanvas extends Canvas {\n  ctx: CanvasRenderingContext2D;\n  width: number;\n  height: number;\n  radius: number;\n  centerRadius: number;\n  marginBound: number;\n  font: string;\n  secondPointerLength: number;\n  minutePointerLength: number;\n  hourPointerLength: number;\n  constructor(width: number = WIDTH, height: number = HEIGHT) {\n    super();\n    this.ctx = this.getContext('2d');\n    this.width = width;\n    this.height = height;\n    this.initVariable();\n    this.initCanvasSize();\n    this.setCtxAttribute(); //设置ctx的属性必须在设置canvas宽高之后设置，否则无效\n    this.ctx.translate(width / 2, height / 2);\n  }\n  /* 初始化变量 */\n  private initVariable() {\n    this.radius = Math.min(this.width, this.height) / 2 * 0.8;\n    this.centerRadius = 10;\n    this.marginBound = 20;\n    this.font = FONT;\n    this.secondPointerLength = this.radius - this.marginBound;\n    this.minutePointerLength = this.secondPointerLength * 0.8;\n    this.hourPointerLength = this.secondPointerLength * 0.6;\n  }\n  /* 初始化画布属性 */\n  private setCtxAttribute() {\n    let { ctx } = this;\n    ctx.fillStyle = '#000000';\n    ctx.strokeStyle = '#000000';\n    ctx.lineWidth = 0.5;\n    ctx.font = this.font;\n  }\n  /* 画圆盘 */\n  private drawDisc(ctx: CanvasRenderingContext2D) {\n    ctx.beginPath();\n    ctx.arc(0, 0, this.radius, 0, Math.PI * 2);\n    ctx.stroke();\n  }\n  /* 画刻度 */\n  private drawScale(ctx: CanvasRenderingContext2D) {\n    let angle;\n    let radius = this.radius - this.marginBound;\n    let scales = ['1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12'];\n    ctx.save();\n    ctx.textAlign = 'center';\n    ctx.textBaseline = 'middle';\n    for (let i = 0, l = scales.length; i < l; i++) {\n      angle = Math.PI / 6 * (i - 2);\n      ctx.fillText(scales[i], radius * Math.cos(angle), radius * Math.sin(angle));\n    }\n    ctx.restore();\n  }\n  /* 画圆心 */\n  private drawCenterArc(ctx: CanvasRenderingContext2D) {\n    ctx.save();\n    ctx.fillStyle = 'red';\n    ctx.beginPath();\n    ctx.arc(0, 0, this.centerRadius, 0, Math.PI * 2, false);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  }\n  /* 画时针 */\n  private drawHourPointer(ctx: CanvasRenderingContext2D, hour: number) {\n    let angle = Math.PI / 6 * (hour - 3);\n    this.drawPointer(ctx, angle, this.hourPointerLength);\n  }\n  /* 画分针 */\n  private drawMinutePointer(ctx: CanvasRenderingContext2D, minute: number) {\n    let angle = Math.PI / 30 * (minute - 15);\n    ctx.save();\n    ctx.fillStyle = '#4286f4';\n    ctx.strokeStyle = '#4286f4';\n    this.drawPointer(ctx, angle, this.minutePointerLength);\n    ctx.restore();\n  }\n  /* 画秒针 */\n  private drawSecondPointer(ctx: CanvasRenderingContext2D, second: number) {\n    let angle = Math.PI / 30 * (second - 15);\n    ctx.save();\n    ctx.rotate(angle);\n    ctx.lineWidth = 1;\n    ctx.fillStyle = '#ffffff';\n    ctx.beginPath();\n    ctx.arc(0, 0, this.centerRadius * 0.8, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.fillStyle = '#e01619';\n    ctx.beginPath();\n    ctx.arc(0, 0, this.centerRadius * 0.6, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.strokeStyle = '#a52729';\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(this.secondPointerLength, 0);\n    ctx.stroke();\n    ctx.restore();\n  }\n  /* 画指针 */\n  private drawPointer(ctx: CanvasRenderingContext2D, angle: number, length: number) {\n    let radian = Math.PI * 45 / 180;\n    let x = this.centerRadius * Math.cos(radian);\n    let y = this.centerRadius * Math.sin(radian);\n    ctx.save();\n    ctx.rotate(angle);\n    ctx.beginPath();\n    ctx.moveTo(x, -y);\n    ctx.lineTo(length, 0);\n    ctx.lineTo(x, y);\n    ctx.arc(0, 0, this.centerRadius, radian, Math.PI * 2 - radian);\n    ctx.closePath();\n    ctx.fill();\n    ctx.stroke();\n    ctx.restore();\n  }\n  public render() {\n    let { ctx, width, height } = this;\n    ctx.clearRect(-width / 2, -height / 2, width, height);\n    let date = new Date();\n    let hour = date.getHours();\n    let minute = date.getMinutes();\n    let second = date.getSeconds();\n    this.drawDisc(ctx);\n    this.drawCenterArc(ctx);\n    this.drawScale(ctx);\n    this.drawHourPointer(ctx, hour);\n    this.drawMinutePointer(ctx, minute);\n    this.drawSecondPointer(ctx, second);\n    window.requestAnimationFrame(this.render.bind(this));\n  }\n}\n\nexport default ClockCanvas;\n","import CommonRender from 'common/render';\nimport { isSignleModule } from 'common/util';\nimport ClockCanvas from './canvas';\n\nconst moduleName = 'clock';\n\nexport default class Clock extends CommonRender {\n  canvas: ClockCanvas;\n  constructor() {\n    super(moduleName);\n    this.canvas = new ClockCanvas();\n  }\n}\n\nif (isSignleModule(moduleName)) {\n  new Clock().render();\n}\n","export function getQuery() {\n  let search = window.location.search;\n  let query = Object.create(null);\n  if (!search) {\n    return query;\n  }\n  let reg = /\\?(\\w+)=(\\w+)/g;\n  let matchs = null;\n  while ((matchs = reg.exec(search))) {\n    query[matchs[1]] = matchs[2];\n  }\n  return query;\n}\n\nexport function isSignleModule(m: string) {\n  let query = getQuery();\n  return query && query.module === m;\n}\n"],"sourceRoot":""}